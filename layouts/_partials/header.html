{{- $title := "" }}
{{- $subtitle := "" }}
{{- $bigimg := false }}

{{- if .IsHome }}
	{{- $title = site.Title }}
	{{- $subtitle = site.Params.subtitle }}
	{{- $bigimg = site.Params.bigimg }}
{{- else }}
	{{- $title = .Title }}
	{{- $subtitle = .Params.subtitle }}
	{{- $bigimg = .Params.bigimg }}
{{- end }}
{{- $firstimg := index $bigimg 0 }}

{{- /*
	Note: beautifuljekyll.js uses `div.#header-big-imgs` to get the list of
	the background images and `.intro-header.big-img` as a target. Use those
	classes to make it works.
*/ -}}
{{- if $bigimg }}
	<div id="header-big-imgs" data-num-img={{ len $bigimg }} {{
	range $i, $img := $bigimg }}
		data-img-src-{{ add $i 1 }}="{{ $img.src}}"
		{{- if $img.desc }}
		data-img-desc-{{ add $i 1 }}="{{ $img.desc }}"
		{{- end }}
	{{- end }}></div>
{{- end }}

{{- if $title }}
	<header class="header-section {{ if $bigimg }}has-img{{ end }} mb-4" data-pagefind-body>
		{{- if $bigimg }}
		<div class="intro-header big-img" style="background-image: url('{{$firstimg.src}}');">
		{{- else }}
		<div class="intro-header no-img pt-5 pb-3">
		{{- end }}
			<div class="container-xl beauty-container">
				<div class="row beauty-row justify-content-center">
					<div class="beauty-col col-xl-8 col-lg-9 col-md-11">
						<div class="beauty-header {{ .Kind }}-header {{ .Kind }}-{{ .Type }}-header">
							<h1>{{ $title }}</h1>
							<hr class="small">
							<span class="beauty-subheader {{ .Kind }}-{{ .Type }}-subheader lh-sm">{{ $subtitle }}</span>
							{{- if eq .Kind "page" }}
							{{- partial "page_meta.html" . }}
							{{- end }}
						</div>
					</div>
				</div>
			</div>
			{{- if $bigimg }}
			<span class="img-desc" style="display: {{ cond (isset $firstimg "desc") "inline" "none" }};">{{ $firstimg.desc }}</span>
			{{- end }}
		</div>
	</header>
{{ else }}
	<div class="intro-header"></div>
{{ end }}
